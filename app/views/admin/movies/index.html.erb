<!DOCTYPE html>
<h1>映画一覧ページ</h1>
<h4><%= link_to "新規登録画面", admin_movies_new_path %></h4>
<table>
  <tr>
    <th>タイトル</th>
    <th>screen_id</th>
    <th>削除</th>
    <th>データid</th>
    <th>公開年</th>
    <th>概要</th>
    <th>画像URL</th>
    <th>上映中</th>
    <th>作成日</th>
    <th>更新日</th>
  </tr>
  <% @movies.each do |movie| %>
    <tr>
      <td><%= link_to movie.name, admin_movies_show_path(movie.id) %></td>
      <td><%= movie.screen_id %></td>
      <td><%= button_to "削除", admin_movies_destroy_path(movie.id), method: :delete %></td>
      <td><%= movie.id %></td>
      <td><%= movie.year %></td>
      <td><%= movie.description %></td>
      <td><%= image_tag(movie.image_url)%></td>
      <td>
        <% if movie.is_showing == true %>
          上映中
        <%  else movie.is_showing == false %>
          上映予定
        <% end %>
      </td>
      <td><%= movie.created_at %></td>
      <td><%= movie.updated_at %></td>
      <% movie.schedules.each do |f| %>
          <td>
          <%# Failed examples:

rspec ./spec/station09/movies_controller_spec.rb:13 
# Admin::MoviesController Station9 GET /admin/movies movies(:id)に対応するscheduleを表示していること
以上の内容のテストが通らなかったため、以下の f.start_time.yearを付け足したが、アプリの性能としてはstation9時点ではいらないものである。    %>
            <%= f.start_time.year %>年
            <%= f.start_time.strftime("%H:%M") %>
            ~
            <%= f.end_time.strftime("%H:%M") %>
          </td>
      <% end %>
    </tr>
  <% end %>
</table>